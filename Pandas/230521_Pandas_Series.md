# Pandas - Series

Python의 주요 데이터 분석 라이브러리
- Numpy : 배열, 행렬 관련 편리한 기능 제공
- Pandas : Series, DataFrame 등 자료구조를 활용한 데이터 분석 기능 제공 
- Matplotlib : 데이터 분석 결과를 시각화하는데 유용한 기능 제공

```py
import pandas as pd
import numpy as np
```

---

## Pandas 란?

Series, DataFrame 등의 자료구조를 활용한 데이터 분석 기능 제공

Pandas 라이브러리 구성
- 여러종류의 클래스와 다양한 함수로 구성
- 시리즈와 데이터프레임의 데이터 구조 클래스 객체 포함
- 시리즈 : 1차원 배열, 데이터프레임 : 2차원 테이블 형태

Pandas의 목적
- 서로 다른 여러가지 유형의 데이터를 공통된 포맷으로 정리하는 것.
- 특히 행과 열로 이루어진 2차원 구조의 데이터프레임을 많이 사용.
- 데이터 분석 실무에서 사용됨

---

## Series 란?

- Pandas의 기본 객체 중 하나
- 동일한 타입의 데이터가 순차적으로 나열된 1차원 배열 형태
- 인덱스(index)와 데이터 값(value)이 일대일 대응

### Series 학습 내용 목차

1. Series 생성 방법
2. Series 데이터의 추가, 삭제, 갱신
3. 인덱싱(Indexing)
4. 슬라이싱(Slicing)
5. Series 연산
6. Series 속성 및 함수
7. 날짜 인덱스를 이용한 Series 생성

---

## Series 생성 방법

`pd.Series(집합적 자료형)`

- 리스트(list)로 생성
- 튜플(tuple)로 생성
- 딕셔너리(dictionary)로 생성
- range() / np.arange() 로 생성

**인덱스(Index)를 따로 명시하지 않을 경우 자동으로 0부터 생성!! (0-base)**


### 리스트로 생성

`s = pd.Series([1,2,3])`

- 리스트 내에 서로 다른 타입의 데이터가 있으면 형변환 발생
    - 문자열이 포함된 경우 모두 문자열로 변환
    - 정수, 실수가 섞여있으면 모두 실수형으로 변환
    - NaN값이 있으면 실수로 인식

`s = pd.Series([1,2,3], index=["a", "b", "c"])`  

- `index=` 매개변수로 인덱스 지정 가능
    - 정수형 인덱스와 문자형 인덱스로 나뉜다.
    - 정수형 인덱스를 따로 지정해줄 경우 0-base 위치 인덱스가 아니게 된다. 
    - `index=` 인수 생략 가능

`s.name = "성적"`, `s.index.name = "성명"`

- name 속성을 이용해 시리즈의 이름을 지정해줄 수 있다. 
- index.name 속성을 이용해 시리즈의 인덱스의 이름을 지정해줄 수 있다.  

`s.values`
- values 속성을 이용해 시리즈의 값들을 볼 수 있다. 
- 이 때 반환되는 시리즈의 값은 numpy의 array 형태로 1차원 배열이다.


### 튜플로 생성

`s2 = pd.Series((1.0, 2.0, 3.0)), index=[1,2,3])`  

### 딕셔너리로 생성

`s3 = pd.Series({key:value, key2:value2, key3:value3 ...})`

- 딕셔너리로 생성할 경우, key가 인덱스(index)가 되고,  
value가 값이 된다.  
- 딕셔너리에도 별도의 인덱스를 지정해줄 수 있다.  

`s_city["서울"]`

- 시리즈의 특정 값을 출력해주려면 인덱스(key)를 사용한다. 
- 문자 인덱스인 경우, 0-base의 위치 인덱스도 사용 가능하다.

### range() / np.arange() 함수 사용하여 생성

`s = pd.Series(range(11, 16))`
- range(start, end) 는 start부터 end-1 까지의 값을 가진다.  
- 인덱스 매개변수를 따로 사용하지 않았기 때문에 0-base의 위치 인덱스가 적용된다.  

`s = pd.Series(np.arange(5))`
- numpy의 arange 함수를 사용해서 시리즈를 만들 수도 있다.  

### 결측값을 포함하여 시리즈 만들기  

Numpy의 `np.nan` 속성 값을 사용하여 생성한다.  

`s = pd.Series([1,2,np.nan,4])`

주의할 점은 Pandas에서는 None을 NaN으로 인식한다.  

---

## Series CRUD

### 시리즈 데이터 추가

`s["변학도"] = 90`  

- 대괄호 안에 인덱스를 넣고, 값을 할당해주는 방식 이용.

### 시리즈 데이터 변경

`s["변학도"] = 80`  

- 대괄호 안에 인덱스를 넣고, 새로운 값을 할당.

### 시리즈 데이터 삭제

`del s["변학도"]`  

- del 명령어 사용하여 삭제.  

----

## 인덱싱(Indexing)

인덱스의 종류
- 문자형 인덱스 
    - 지정하지 않으면 0-base 위치 인덱스 자동 적용
    - 문자형 인덱스는 문자 인덱스와 위치 인덱스 둘 다 사용 가능
- 정수형 인덱스
    - 정수형 인덱스의 경우 0-base 위치 인덱스 사용 불가

`s[0], s["이몽룡"]`  
`>> (95, 100)`
- 두 개 이상의 인덱싱 코드를 나열하면 튜플 형태로 출력

`s[[0,1,2]]`  
- 리스트를 이용한 인덱싱도 가능하다.   
- **이 경우 Series 형태로 결과 값이 출력된다.**

`s.이몽룡` 
- 문자 인덱스의 경우 . 연산자를 이용하여 접근 가능하다. 
- 즉, `s.a == s.["a"]`

---

## 슬라이싱(Slicing)

- 0-base 위치 인덱스를 이용한 슬라이싱
    - `Series[start:end]` : start ~ end-1 까지 슬라이싱
- 문자 인덱스를 이용한 슬라이싱
    - `Series['start':'end']` : 'start' ~ 'end` 까지 슬라이싱

*정수형 인덱스 사용한 경우에도, 슬라이싱을 숫자로 할 경우 0-base 위치 슬라이싱이 적용된다*  


---

## 시리즈 연산

- 벡터화 연산 : 집합적 자료형의 원소 각각에 대해 독립적으로 계산 수행
    - 단, 연산은 시리즈의 값에만 적용
    - 인덱스 값은 변경 불가

- Boolean Selection : boolean 연산 결과 True에 해당하는 값만 추출
    - `DS[조건]` : 연산식 결과가 True 인 값만 추출
    - 다중 조건의 경우, &(and), | (or)로 연결 가능

**인덱스에도 boolean 연산 가능!** -> 값이 바뀌는게 아니라 조건에 true인 값들만 추출하는 거라서 가능하다!  

---

## Dictionary와 Series의 관계  

Series 객체는 index를 key로 가지는 Dictionary 형과 같다고 볼 수 있다.  
때문에, 파이썬의 Dictionary 자료구조에서 제공하는 대부분의 연산자를 쓸 수 있다!  
대표적으로 `in` 연산자와 `for` 반복문 등이 있다.  

파이썬의 딕셔너리 in 연산자가 그대로 적용된다 -> `key`값만 `in` 연산자 사용 가능!  
`not in` 연산자도 사용 가능하다.  

**단, 0-base 위치 인덱스는 in 연산자가 사용 불가능하다!**  
**정수형 인덱스와 문자형 인덱스인 경우만 사용 가능.**

`list(series.items())`  
`for k, v in series.items()`  

위의 코드들 모두 사용 가능하다!  

**단! Series에서는 `.values()` 메서드가 사용 불가능하다!**  
**Series에서는 `.values` 속성 으로 대신 사용한다.**  

---

## Series 에 적용 가능한 함수(메서드)

- `len(s)` : 시리즈 원소의 개수
- `s.shape` : 시리즈의 형태 (차원 반환, tuple 형태로 반환)
- `s.unique()` : 원소 중에 중복된 값을 제외하고 유일한 값을 출력
- `s.count()` : NaN 값을 제외한 원소의 개수
- `s.mean()` : NaN 값을 제외한 평균
- `s.value_counts()` : NaN 값을 제외하고, 각 원소들에 대해 동일한 값의 원소끼리 그룹핑하여 개수를 반환.

---

## 날짜 인덱스를 이용한 시리즈 생성

Pandas 패키지의 `date_range(start, end, periods, freq)` 함수 사용하여 생성  

- 날짜 자동 생성  
- 지정된 범위 내의 인덱스 생성  
- start : (필수) 시작 날짜  
- end : 종료 날짜  
- periods : 기간 (end 또는 periods 둘 중의 하나 필수)  
- freq : 간격 (D(Day)가 디폴트)

freq 매개변수의 값으로 줄 수 있는 인수에는 여러가지가 있다.  
대표적으로 [s: 초, T: 분, H: 시간, W: 주(일요일), W-MON : 주(월요일)] 정도가 있다.  










