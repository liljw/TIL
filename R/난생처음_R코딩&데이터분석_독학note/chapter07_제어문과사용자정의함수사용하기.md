# 난생처음 R 코딩 & 데이터 분석 - Chapter 07. 제어문과 사용자 정의 함수 사용하기

## 이것이 조건문입니다
조건문(conditional statement)은 조건에 따라 실행할 명령문을 다르게 할 경우에 사용한다. 

### if-else 문

if-else 문의 기본구조
- ```r
    if(비교조건){
        조건이 참일 때 실행할 명령문(들)
    } else {
        조건이 거짓일 때 실행할 명령문(들)
    }
    ```
- **else 구문을 쓸 때는 if 구문의 {닫는 중괄호} 뒤에 줄바꿈 없이 바로! 써준다**
- 참 또는 거짓일 때 실행할 {코드 블럭 안에 있는 명령문}은 **여러 개**가 들어갈 수 있다. 

if-else 문에서 else가 생략된 경우
- ```r
    job.type <- "A"
    bonus <- 100
    if (job.type == "B") {
        bonus <- 200
    }
    print(bonus)
    ```
else를 생략해주려면 `bonus <- 100` 을 조건문을 쓰기 전에 써준 것 처럼,  
기본값을 할당되어 있는 경우만 가능하고,  
if 함수의 조건을 만족하지 못한다면 아무 명령도 실행되지 않는다.  

if-else 문에서 else if 의 사용
- if와 else 말고도, else if 도 사용가능하다. 


### ifelse문

만약 *조건에 따라 선택할 값이 각각 하나씩이면* ifelse문을 사용하는 것이 편리하다.  

ifelse 문의 기본구조
- `ifelse(비교조건, 조건이 참일 때 선택할 값, 조건이 거짓일 때 선택할 값)`

---

## 이것이 반복문입니다

### for 문

```r
for (반복 변수 in 반복 범위) {
    반복할 명령문(들)
}
```
- 여기서 반복 범위는 반복 변수에 할당할 값을 모아둔 **벡터**로 이 **벡터의 길이**만큼 for문이 반복된다. 

* 조건문에 `==T`는 생략 가능하다! 
* 비어있는 벡터를 만드는 것은 `v <- c()` 또는 `v <- NULL` 을 이용한다.  

### while 문

```r
while (비교조건) {
    반복할 명령문(들)
}
```
- 여기서 비교조건은 반복을 수행할지 중지할지를 결정하는 조건문이고, 비교 조건을 만족하는 동안 코드블럭 안의 명령문들을 반복 실행한다. 

* *무한루프에 빠지지 않도록 주의하자!*

### apply() 계열 함수

반복 작업의 대상이 매트릭스나 데이터프레임의 행이나 열인 경우는 for문이나 while문 대신에 apply()함수를 이용할 수 있다.  

**R에서 대규모 데이터를 분석하는 경우 처리 속도의 문제 때문에 되도록 for문이나 while문을 사용하지 않는 것을 권장한다.**

이 때, apply() 함수를 이용하면 처리 속도를 향상 시킬 수 있다.  

apply() 함수는 *매트릭스나 데이터프레임에 있는 행들이나 열들을 하나하나 차례로 꺼내어 평균이나 함계 등을 구하는 작업을 수행하고자 할 때 유용하다.*  

`apply(데이터셋, 행/열 방향 지정, 적용할 함수)`
- 두번째 매개변수에는 행 방향일 경우 1, 열 방향 작업의 경우 2를 지정한다. 
- 세번째 매개변수에는 적용할 함수를 넣어준다

---

## 사용자 정의 함수는 무엇인가요?

### 사용자 정의 함수의 개념

```r
함수명 <- function(매개변수 목록) {
    실행할 명령문(들)
    return(함수의 실행 결과)
}
```
- 함수명 : 사용자 정의 함수의 이름으로 사용자가 지정한다.
    - 기존에 존재하는 함수와 이름이 겹치지 않게 주의한다.
- 매개변수 목록 : 함수에 입력할 매개변수 이름을 지정한다.
- 실행할 명령문(들) : 함수에서 처리하고 싶은 내용을 작성한다. 
- 함수의 실행 결과: 함수의 실행 결과를 반환한다. 반환 결과가 없으면 return() 함수를 생략한다.  

### 매개변수에 기본값 설정

매개변수에도 기본값을 설정할 수 있다.  
예를 들어 매개변수가 `(x, y=2)`가 있을 때, 사용자가 y의 값을 입력하지 않으면 `y=2`를 자동 적용한다.  
**y에 *다른 값*을 넣으면 기본 값이 아닌, 입력받은 값을 적용한다!!**

### 여러 개의 값을 반환하는 경우

함수는 일반적으로 하나의 값만 return한다.  
만약 여러 개의 값을 반환하는 경우, `list()`로 여러 개의 결과 값을 하나로 묵어서 반환해주면 된다.  

`return(list(x=result1, y=result2))`  

### 사용자 정의 함수의 저장과 재실행

자주 사용하는 사용자 정의 함수는 **파일**에 따로 모아두었다가 필요시 호출해서 사용할 수 있다.  

함수를 작성해서 임의의 파일에 저장한 후(`myfunc.R`)  
source 함수를 이용해서 `source("myfunc.R")` 로 myfunc.R 파일 안에 있는 함수를 실행해주면 된다.  
만약 해당 파일이 다른 폴더에 저장되어 있다면, `setwd()`를 이용해서 워킹디렉토리를 바꿔주자.  

**`source()` 함수는 R 프로그램이 저장된 파일을 불러와서 그 안에 있는 내용을 실행시킬 때 사용한다.**

---

## 조건에 맞는 데이터의 위치를 찾아봅니다

데이터 분석을 하다보면 내가 원하는 데이터가 벡터, 매트릭스, 데이터프레임 안에서 어디에 위치하는지 알아야 할 때가 있다.  
그럴 때 편리하게 사용할 수 있는 함수가 `which()` 함수이다.  

```r
score <- c(76,84,69,50,95,60,82,71,88,84)
which(score==69)
which(score>=85)
max(score)
which.max(score)
min(score)
which.min(score)
```

**`which()`함수는 찾고자 하는 값의 *인덱스*를 알아내는 함수이다!**

조건에 맞는 값을 추출하는 작업의 경우, which() 함수 말고 `subset()` 함수를 이용할 수도 있다.  









