# 난생처음 R 코딩 & 데이터 분석 - Chapter 06. 데이터 입력하고 출력하기 

## 데이터의 입력과 출력은 어떻게 하는 것일까요?

### R에서의 입력과 출력 

R 프로그래밍의 목적은 데이터를 분석하여 유용한 정보를 얻기 위함이다.  
따라서 R 프로그램은 분석 대상이 되는 데이터를 **입력**한 후,   
입력된 데이터를 분석하여 필요한 정보를 **출력**한다.  

즉, R 프로그램에서 데이터의 입력과 결과의 출력은 기본적인 구성 요소이다.  

### 화면에서 데이터 입력받기  

화면에서 데이터를 입력받으려면 팝업창을 띄워야 하는데, 이 작업을 하려면 svDialogs 패키지가 필요하다. 먼저 svDialogs 패키지를 설치한 후 library() 함수를 통해서 패키지를 불러온다.  

- `install.packages("svDialogs")`
- `library(svDialogs)`

input은 `dlgInput("")$res`의 형태로 받는다.  
괄호 안에 들어갈 말은 팝업창에 표시되는 문자이다.  
당연히 변수에 할당을 해줘야 입력받은 값을 이후에도 사용할 수 있다.  
- `user.input <- dlgInput("Input Income")$res`

주의할 점은, 사용자가 input 팝업 창에 입력한 데이터의 자료 형태는 "문자열"이다.  
따라서, 숫자를 입력해서 문자열의 형태로 값이 들어오기 때문에,  
숫자로 쓰고 싶다면 `as.numeric()`을 이용하여 숫자로 바꿔줘야 한다.  

### print() 함수와 cat() 함수

프로그램의 처리 결과를 제 3자가 이해하기 쉽게 출력하려면 print() 또는 cat()함수를 이용해야 한다.  

- print() 
    - 하나의 값을 출력할 때 
    - 데이터프레임과 같은 2차원 자료구조를 출력할 때
    - 출력 후 자동 줄바꿈
- cat()
    - 여러 개의 값을 연결해서 출력할 때 
    - 벡터는 출력되나, 2차원 자료구조는 출력되지 않음
    - 출력 후 줄바꿈을 하려면 "\n" 필요

## 파일을 이용해 데이터를 읽고 쓰는 방법을 알아봅시다

### 작업 폴더 

- `getwd()` : 현재 작업 폴더 알아내기
- `setwd()` : 작업 폴더 변경하기 (R 스튜디오를 종료할 때까지 지속된다)

만약 작업 폴더의 경로명을 직접 작성(`/`이용)하는게 아니라 복사, 붙여넣기 하는 거라면,  
역슬래쉬(`\`)로 폴더명이 구분되어있다. 이럴 경우에는 역슬래쉬를 하나씩 더 넣어주면 된다.  

### .csv 파일 읽기와 쓰기

R에서 데이터 분석을 위해 가장 많이 사용하는 파일 형태는 .csv 파일이다.  
csv는 'comma-separated values'의 약자로, 콤마로 열과 열을 구분한 파일을 말한다.  
보통 엑셀을 이용해 읽을 수 있지만, 메모장과 같은 텍스트 편집기를 통해서도 읽을 수 있다.  

- `변수 <- read.csv("파일경로/파일명.csv", header=T)`

`read.csv()` 함수를 통해 csv파일을 가져와준다.  
함수의 두 번째 매개변수인 header=T는 읽어올 파일의 첫 번째 줄은 값이 아닌 열의 이름이라는 뜻이다.  
즉, 실제 데이터는 두 번째 줄부터 시작할 때 써준다.  

### .csv 파일에 데이터 쓰기

- `write.csv(my.iris, "my_iris.csv", row.names=F)`

`write.csv()` 함수를 이용한다.  
첫 번째 매개변수에는 저장할 데이터를, 두 번째 매개변수에는 저장할 파일의 이름을,   
세 번째 매개변수는 해당 데이터를 저장할 때 행 번호 (행 이름)은 제외하라는 의미이다.  

### 엑셀 파일 읽기와 쓰기

엑셀 파일(.xls, .xlsx)를 R에서 읽으려면 엑셀 파일을 .csv 파일로 저장한 다음 csv 파일을 읽어들이는 방법도 있고,  
엑셀 파일을 직접 읽으려면 xlsx 패키지의 설치가 필요하다.  

- `install.packages("xlsx")`
- `library(xlsx)`

그리고, `read.xlsx()`함수를 이용하여 엑셀 파일을 읽는다.  

- `변수 <- read.xlsx("파일경로/파일명.xlsx", header=T, sheetIndex=1)`

첫 번째와 두 번째 매개변수는 read.csv() 함수와 동일한 기능인데,  
세번째 매개변수는 엑셀 파일에는 여러 워크시트가 포함될 수 있으니, 어떤 시트를 읽을지 지정해주는 기능을 한다.  

*엑셀 파일에 데이터를 쓰는 방법은 csv파일에 데이터를 쓰는 방법과 같다.*  
*함수만 `write.xlsx()`로 바뀐다*

**편집 중인 엑셀 파일은 R에서 읽을 수 없기 때문에 편집을 종료한 후에 읽어들여야한다!**

## 파일 입출력에서 알아야 할 내용을 확인합니다

### 실행 결과를 파일로 출력하기 

- `sink("result.txt", append=T)` : 파일로 출력 시작
- `sink()` : 파일로 출력 종료

위와 같이, 실행 결과를 파일로 출력하기 위해서는 `sink()`함수를 써준다.  
sink 함수의 첫번째 파라미터는 결과값이 출력될 파일명을 써준다.  
두번째 파라미터로는 파일의 내용 맨 마지막에 덧붙여서 출력하라는 의미의 append=T 를 써주는데,   
만약 F일 경우 기존에 있던 내용을 지우고 새로 출력하는 것을 의미한다. 

### 탭이나 공백으로 분리된 파일 읽기

R에서 분석할 파일은 대부분 csv나 엑셀 파일이지만, 열이 공백이나 탭으로 분리된 파일도 종종 접하게 된다.  
이럴 때, `read.table()`함수를 이용해 데이터를 R로 불러올 수 있다.  

- `air <- read.table("airquality.txt", header=T, sep=" ")`

이 때, 세번째 파라미터인 sep="" 안에 공백이 들어가면 공백을 기준으로 데이터를 나누고,  
\t이 들어가면 탭을 기준으로 데이터를 나눈다.  

공백이나 탭으로 분리된 파일을 작성하는 함수는 `write.table()`이다.  

- `write.table(my_mtcars, "test.txt", sep="\t")`

