# 난생처음 R 코딩 & 데이터 분석 - Chapter 05. 매트릭스와 데이터프레임 알아보기


## 이것이 매트릭스입니다

2차원 자료구조에는 매트릭스와 데이터프레임이 있는데,  
매트릭스와 데이터프레임의 차이점은  
- 매트릭스(matrix): 저장되는 모든 자료의 종류(data type)가 동일 (보통 숫자로만 이루어진다)
- 데이터프레임(data frame): 서로 다른 데이터 종류가 저장될 수 있음

2차원 형태의 데이터는 *테이블 형태*로 표현되는데,  
테이블에서 가로줄 방향은 행(row) 또는 **관측값(observation)**이라고 하고,  
세로줄 방향은 열(column), 컬럼 또는 **변수(variable)**이라고 한다. 


매트릭스를 만드는 법은 아래와 같다.   
`m <- matrix(1:20, nrow=4, nrow=5)`  
첫번째 파라미터로는 매트릭스에 저장될 값,  
두번째 파라미터로는 매트릭스 행의 개수,  
세번째 파라미터로는 매트릭스 열의 개수를 넣어준다.  

기본적으로는 **열 방향으로 데이터가 채워진다**.  
하지만, 행 방향으로 데이터를 채우고 싶을 때는,  
매개변수에 `byrow=T`를 추가한다.  

또한, 벡터들을 묶어서 매트릭스를 만들어줄 수도 있다.  
이 경우, 행 방향으로 묶는 `rbind()`와 `cbind()`를 써준다.  
*rbind, cbind함수는 매트릭스만을 반환한다!*

**참고로, 매트릭스와 벡터도 결합이 가능하다!**  
매트릭스와 매트릭스도 묶어줄 수 있는데, 벡터끼리의 결합에서도 그랬듯이, 길이가 같아야 한다.  

### 매트릭스에서의 값의 추출

매트릭스에서 특정 위치에 있는 값을 추출하는 방법은 기본적으로는 벡터와 유사하게 `[]` 대괄호를 이용한다.  
하지만, 2차원 상에서 위치를 지정하려면 인덱스 2개가 필요하다.  
즉, `[몇 번째 행, 몇 번째 열]` 을 지정하는 2개의 인덱스 값이 필요하다.  

### 매트릭스의 행과 열에 이름붙이기 

`names()`를 이용해 벡터의 데이터 값에 이름을 붙여준 것처럼,  
매트릭스의 행과 열에도 이름을 붙여줄 수 있다.  
이 때 사용하는 함수가 `rownames(), colnames()`이다.   

또한, 이미 이름을 붙여준 매트릭스의 모든 행의 이름, 또는 모든 열의 이름을 추출하고 싶을 때도,  
`rownames(), colnames()`를 써주면 된다.  

또한 `colnames[score][2]`처럼 score 매트릭스의 열의 이름 중 두 번째 값, 이라는 값을 추출할 때도 사용가능하다.  

## 데이터프레임은 무엇인가요?

데이터프레임(Data Frame)은 2개 이상의 자료형으로 구성된 2차원 자료를 저장하고 처리하는 데 사용된다.  
*매트릭스에 저장 가능한 자료는 데이터 프레임에도 저장할 수 있다!*

데이터프레임은 보통 여러 개의 벡터를 결합하는 형태로 생성한다.  

## 매트릭스와 데이터프레임을 다루어볼까요?

- 데이터셋(dataset): 분석을 위해 2차원 형태로 모아놓은 자료를 데이터셋(dataset)이라는 용어로 많이 사용한다. 

### 데이터 셋의 기본정보 알아보기
- `dim()`: 행과 열의 개수를 반환 (dimension의 약자) 
- `nrow()`: 행의 개수 보이기
- `ncol()`: 열의 개수 보이기
- `str()`: 데이터셋 요약 정보 보기 (structure의 약자)
- `levels(iris[,5])`: iris 데이터 셋의 5번째 열 데이터의 종류 보기 
- `table(iris[,5])`: 5번째 열 데이터의 종류별 행의 개수 세기

### 행별, 열별로 합계와 평균 계산하기
- `colSums([iris[,-5])`: iris 데이터 셋의 5번째 열을 제외한 모든 열의 열별 합계
- `colMeans([iris[,-5])`: ,, 열별 평균
- `rowSums([iris[,-5]])`: ,, 행별 합계
- `rowMeans([iris[,-5])`: ,, 행별 평균 

### 행과 열의 방향 변환하기

- `t()` : i행 j열의 매트리스를 j행 i열의 매트리스로 바꿔준다.  
*(전치행렬: 주대각선을 기준으로 대각선으로 반사 대칭시켜준다.)*

### 조건에 맞는 행과 열의 값 추출하기  

`subset(iris, Sepal.Length>5.0 & Sepal.Width>4.0)` 의 형식을 이용한다.  

첫번째 파라미터에는 데이터셋이 들어가고,  
두번째 파라미터에는 조건이 들어간다.

단, subset 함수의 경우 매트릭스에서는 잘 작동되지 않고,  
데이터프레임에서 잘 작동되는 함수이다. 

### 매트릭스와 데이터프레임의 자료구조 확인/변환하기

- `is.matrix()`: 괄호 안에 들어가는 데이터셋이 매트릭스 인지 아닌지 T, F 값을 반환한다.
- `is.data.frame()`: 괄호 안에 들어가는 데이터셋이 데이터프레임인지 아닌지 T, F값을 반환한다.  
- `as.matrix()` : 데이터프레임을 매트릭스로 변환.
- `as.data.frame()`: 매트릭스를 데이터프레임으로 변환.


### 데이터프레임에만 적용되는 열 추출 방법  

데이터프레임은 2차원 자료구조이기 때문에 값을 추출할 때 행과 열의 인덱스 값을 모두 넣어주어야한다.  
하지만, 데이터프레임의 경우에는 하나의 값만 넣을 수도 있는데,  
이 때 하나의 값은 '열'을 의미한다.   
그리고 이런 방식으로 열을 추출하면 결과가 벡터가 아니라 열의 개수가 1개인 *데이터프레임*이 된다.  

**정리하면, `iris[,5]`의 결과는 값의 개수가 150개인 벡터,**  
**`iris[5]`의 결과는 자료의 크기가 150행 1열인 데이터프레임이 반환된다.**

또한 데이터셋 이름 다음에 `$`을 붙이고 이어서 열의 이름을 **따옴표 없이** 붙이는 방법은 데이터프레임에만 적용되며, 실행 결과는 벡터이다. 

**즉, `iris$Species`는 `iris[,"Species"]`와 동일한 결과를 도출한다.**







